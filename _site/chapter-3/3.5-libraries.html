<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@kehers">
  <meta name="twitter:title" content="3.5. Libraries">
  <meta name="twitter:description" content="As you might have noticed, a lot of tiny details go into API consumption. For each endpoint you will be working with (you may have to work with 5 or more in some cases), you need to prepare the req...">
  <meta name="twitter:creator" content="@kehers">
  <title>3.5. Libraries</title>
  <link href='https://fonts.googleapis.com/css?family=Libre+Baskerville:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link rel="stylesheet" href="/assets/css/skeleton.css">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <link rel="stylesheet" href="/assets/css/zenburn.css" />
</head>
<body>

<div class="container">
  <header>
    <div class="row">
      <div id="logo" class="three columns">
        <div id="menu">☰</div>
      </div>
    </div>
  </header>
  <div class="row">
    <div class="six offset-by-three columns">
      <article>
        <h5>Chapter 3</h5>
        <h1 class="title">3.5. Libraries</h1>
        <p>As you might have noticed, a lot of tiny details go into API consumption. For each endpoint you will be working with (you may have to work with 5 or more in some cases), you need to prepare the request, put together all necessary request headers, format the request body or parameters and encode them appropriately, make the request, get the response, process the response headers, parse the response, manage errors, manage authentication, etc. To make this easier, API providers and developers provide libraries developers can build on in different programming languages.</p>

<p>A library is simply a set of helper functions that have abstracted all the low level API work. If for example I need to connect to Twitter’s public stream and listen to tweets containing the word ‘API’, I need to prepare the necessary parameters and request to the public stream endpoint in strict adherence to the OAuth standard. I also need to create and manage a connection that can handle the stream of incoming tweets, extract and format each tweet from the stream and manage network lags and errors. Building that from ground up will take a good time. But then, I can just use <em>twit</em><sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>, an unofficial Twitter library and have the work reduced to this few lines of code:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Twit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twit'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">twitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Twit</span><span class="p">({</span>
  <span class="na">consumer_key</span><span class="p">:</span> <span class="s1">'KEY'</span><span class="p">,</span>
  <span class="na">consumer_secret</span><span class="p">:</span> <span class="s1">'SECRET'</span><span class="p">,</span>
  <span class="na">access_token</span><span class="p">:</span> <span class="s1">'TOKEN'</span><span class="p">,</span>
  <span class="na">access_token_secret</span><span class="p">:</span> <span class="s1">'TOKEN_SECRET'</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">twitter</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="s1">'statuses/filter'</span><span class="p">,</span>
           <span class="p">{</span><span class="na">track</span><span class="p">:</span> <span class="s1">'API'</span> <span class="p">});</span>
<span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'tweet'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">tweet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tweet</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>Isn’t that just amazing?</p>

<p>We can even step it up a notch. We can bring in another library to help us link the URLs, hashtags and mentions contained in the tweet. Twitter has an official one we can use<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Twit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twit'</span><span class="p">),</span>
  <span class="nx">Twtxt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'twitter-text'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">twitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Twit</span><span class="p">({</span>
  <span class="na">consumer_key</span><span class="p">:</span> <span class="nx">KEY</span><span class="p">,</span>
  <span class="na">consumer_secret</span><span class="p">:</span> <span class="nx">SECRET</span><span class="p">,</span>
  <span class="na">access_token</span><span class="p">:</span> <span class="nx">TOKEN</span><span class="p">,</span>
  <span class="na">access_token_secret</span><span class="p">:</span> <span class="nx">TOKEN_SECRET</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">twitter</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="s1">'statuses/filter'</span><span class="p">,</span>
                <span class="p">{</span><span class="na">track</span><span class="p">:</span> <span class="s1">'API'</span><span class="p">});</span>
<span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'tweet'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">tweet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
    <span class="nx">Twtxt</span><span class="p">.</span><span class="nx">autoLink</span><span class="p">(</span><span class="nx">Twtxt</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">tweet</span><span class="p">.</span><span class="nx">text</span><span class="p">),</span> <span class="p">{</span>
      <span class="na">urlEntities</span><span class="p">:</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">urls</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>The takeaway here is that you don’t need to take the long route of building everything from scratch. Check the API developer website for libraries, official (built by the provider) or unofficial (built by other developers), and see how you can leverage any to speed up your development process. Unless it is a new API, and I mean really new, there must be something you can build on. If you can’t find any, then that’s probably your cue to build one for other developers :)</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>twit - Twitter API client for node (REST &amp; Streaming): <a href="https://github.com/ttezel/twit">https://github.com/ttezel/twit</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>twitter text (js) - A javascript library that provides autolinking and extraction for URLs, usernames, lists, and hashtags: <a href="https://github.com/twitter/twitter-text-js">https://github.com/twitter/twitter-text-js</a> <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

      </article>
    </div>
  </div>
</div>
<div class="colophon">
  <div class="container">
    <div class="row">
      <div class="six offset-by-three columns">
        <ul class="pagination">
        
        
        <li class="six columns m-t-20 prev"><a href="/chapter-3/3.4-authentication-and-authorization.html">3.4. Authentication & Authorization</a></li>
        <li class="six columns m-t-20 next"><a href="/chapter-3/3.6-rate-limit.html">3.6. Rate Limit</a></li>
        </ul>

      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="six offset-by-three columns">
        <nav>
          <li><a href="/">home</a></li>
          <li><a href="http://gum.co/Sxoj" class="bordered">Download the book. Free</a></li>
        </nav>
        <p>&copy; 2016. Opeyemi Obembe. All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/menu.js"></script>
<script src="https://carnivalapp.io/sites/502/init.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", Carnival.init);
</script>

</body>
</html>

